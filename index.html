<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Structured Weekly Planner</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect x='15' y='20' width='15' height='60' rx='2' fill='black'/%3E%3Crect x='42' y='20' width='15' height='60' rx='2' fill='black'/%3E%3Crect x='70' y='20' width='15' height='60' rx='2' fill='black'/%3E%3C!-- White Border Layer --%3E%3Cpolyline points='20,55 40,75 80,30' fill='none' stroke='white' stroke-width='21' stroke-linecap='round' stroke-linejoin='round'/%3E%3C!-- Green Top Layer --%3E%3Cpolyline points='20,55 40,75 80,30' fill='none' stroke='black' stroke-width='12' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E">
</head>
<body>
<header class="app-header">
    <div class="app-title">Week Planner</div>
    <div class="app-settings-container">
        <div class="header-icon icon-gear" onclick="toggleDropdown()" title="App Settings"></div>
        <div class="dropdown-menu" id="appDropdown">
            <div class="dropdown-item" onclick="toggleDarkMode()">Toggle Dark Mode</div>
            <div class="dropdown-item" onclick="openViewModal()">Days Settings</div>
            <div class="dropdown-item" onclick="exportData()">Export JSON</div>
            <div class="dropdown-item" onclick="triggerImport()">Import JSON</div>
        </div>
    </div>
</header>

<input type="file" id="fileInput" style="display: none;" accept=".json" onchange="importData(this)">

<div class="nav-arrow nav-left" onclick="navigate(-1)">
    <svg viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
</div>
<div class="nav-arrow nav-right" onclick="navigate(1)">
    <svg viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
</div>

<div class="calendar-wrapper">
    <div class="calendar-grid" id="calendar"></div>
</div>

<div class="modal-overlay" id="settingsModal">
    <div class="modal">
        <h3>Card Settings</h3>
        
        <div class="form-group">
            <label>Send to Date</label>
            <div style="display: flex; gap: 10px;">
                <input type="date" id="moveDateInput" class="input-text">
                <button class="btn btn-save" onclick="moveNoteToDate()" style="flex-shrink: 0;">Move</button>
            </div>
        </div>

        <div style="border-top: 1px solid var(--separator-color); padding-top: 20px; margin-top: 20px;">
            <div class="form-group">
                <label>Repeat on</label>
                <div class="day-selector" id="daySelector">
                    <div class="day-toggle" data-day="0">S</div>
                    <div class="day-toggle" data-day="1">M</div>
                    <div class="day-toggle" data-day="2">T</div>
                    <div class="day-toggle" data-day="3">W</div>
                    <div class="day-toggle" data-day="4">T</div>
                    <div class="day-toggle" data-day="5">F</div>
                    <div class="day-toggle" data-day="6">S</div>
                </div>
            </div>
        </div>

        <div class="modal-actions">
            <button class="btn btn-delete" id="stopRepeatBtn" style="display:none;">Clear Series</button>
            <button class="btn btn-cancel" onclick="closeModal()">Cancel</button>
            <button class="btn btn-save" onclick="saveSettings()">Save</button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="viewModal">
    <div class="modal">
        <h3>Days Settings</h3>
        <div class="form-group">
            <label>Total Days to Show</label>
            <input type="number" id="settingTotalDays" min="1" max="7" class="input-text">
            <div class="help-text">How many columns visible at once.</div>
        </div>
        <div class="form-group">
            <label>Past Days Offset</label>
            <input type="number" id="settingPastDays" min="0" max="14" class="input-text">
            <div class="help-text">e.g. 1 = Start from Yesterday.</div>
        </div>
        <div class="modal-actions">
            <button class="btn btn-cancel" onclick="closeViewModal()">Cancel</button>
            <button class="btn btn-save" onclick="saveViewSettings()">Save</button>
        </div>
    </div>
</div>

<script src="script.js" defer></script>
</body>
</html>
